AFRAME.registerShader('sphere_madona', {
  schema: {
    timeMsec: {type:'time'},
  },
  
  uniforms: {
      // the texture value (once the texture source is loaded, update)
      //map: { type: 't', value: null },
      // texture parameters
      timeMsec: {type:'time', is:'uniform'},
  },

  init: function(data) {
      
      this.material = new THREE.ShaderMaterial({

          uniforms: this.uniforms,
          vertexShader: this.vertexShader,
          fragmentShader: this.fragmentShader
        
      });
  },
                               



  update: function (data) {
    //console.log(data.something)

      //AFRAME.utils.material.updateMap(this, data);
       this.uniforms.timeMsec.value = data.timeMsec;
       //this.uniforms.interpolate.value = (data.timeMsec%500.0)/500;
       //this.uniforms.something.value = data.something;
      //console.log(data.timeMsec)
      //console.log((data.timeMsec%500.0)/500)
    
      //if ((data.timeMsec%500.0)-this.timeBefore < 0.0){
      //  console.log('tick')
      //  setTimeout(animate,2000);
        //animate();
      //}
      //console.log(this.timeBefore, data.timeMsec, (data.timeMsec%500.0)-this.timeBefore )
      //this.timeBefore = (data.timeMsec%500.0);
     
   },

  
  vertexShader: `


varying vec3 p;


void main() {
  p = vec3(vec4(position,1.0));
  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

}

`,
  fragmentShader: `

//varying float noise;
varying vec3 p;
const float PI = 3.14159;
uniform float timeMsec;

float map(float value, float min1, float max1, float min2, float max2)
{
  // Convert the current value to a percentage
  // 0% - min1, 100% - max1
  float perc = (value - min1) / (max1 - min1);

  // Do the same operation backwards with min2 and max2
  return perc * (max2 - min2) + min2;
}

float chladni(vec3 pos, float k,float l,float m,float s,float L)
{

return cos(k*pos.x*PI/L)*(cos(l*pos.y*PI/L)*cos(m*pos.z*PI/L)+s*cos(m*pos.y*PI/L)*cos(l*pos.z*PI/L))+
       cos(l*pos.x*PI/L)*(cos(k*pos.y*PI/L)*cos(m*pos.z*PI/L)+s*cos(m*pos.y*PI/L)*cos(k*pos.z*PI/L))+
       cos(m*pos.x*PI/L)*(cos(k*pos.y*PI/L)*cos(l*pos.z*PI/L)+s*cos(l*pos.y*PI/L )*cos(k*pos.z*PI/L));// where k, l and m are integers, s=âˆ“ 1.
}

float[] k = float[](0.2199999988079071, 3.6500000953674316, 1.399999976158142, 1.5410000085830688, -1.1579999923706055, -1.0950000286102295, 0.8949999809265137, 1.2999999523162842, 3.2330000400543213, 1.774999976158142, 0.20399999618530273, 2.1700000762939453, 2.8410000801086426, 2.111999988555908, 5.244999885559082, 2.812000036239624, -0.875, 2.503999948501587, 2.4830000400543213, 4.5289998054504395, 1.7580000162124634, 0.14100000262260437, 4.336999893188477, 3.075000047683716, 3.075000047683716, 1.940999984741211, 1.6699999570846558, -1.6699999570846558, -0.1289999932050705, 1.024999976158142, 0.057999998331069946, 2.2660000324249268, 4.857999801635742, 0.9200000166893005, -3.049999952316284, -3.7290000915527344, -1.3580000400543213, -3.1410000324249268, 0.9700000286102295, 1.5540000200271606, 2.2829999923706055, 2.190000057220459, 1.25, 1.4119999408721924, 0.05400000140070915, 0.11599999666213989, 2.7200000286102295, 7.6579999923706055, 4.708000183105469, 3.3910000324249268, 3.4749999046325684, 2.437000036239624, 3.075000047683716, 3.4539999961853027, 2.494999885559082, -1.2120000123977661, 0.6079999208450317, -0.7710000276565552, -0.6420000195503235, 2.5959999561309814, 3.5880000591278076, 3.61299991607666, 4.48799991607666, 2.7790000438690186, 1.2289999723434448, 1.75, 3.0880000591278076, 4.067999839782715, 3.9130001068115234, 4.453999996185303, 4.316999912261963, 2.8570001125335693, 3.687999963760376, 6.074999809265137, 5.767000198364258, 2.2290000915527344, -1.253999948501587, -2.1670000553131104, -2.6670000553131104, -1.3420000076293945, 2.746000051498413, 3.9170000553131104, 4.078999996185303, 7.004000186920166, 1.8569999933242798, -0.6460000276565552, -0.46299999952316284, 2.2249999046325684, 4.1519999504089355, 5.163000106811523, 1.6540000438690186, 2.763000011444092, 6.2829999923706055, 9.125, 8.13700008392334, 5.645999908447266, 4.61299991607666, 4.474999904632568, 5.126999855041504, 7.620999813079834, 0.8460000157356262, 2.9210000038146973, 4.678999900817871, 3.441999912261963, 4.208000183105469, 3.75, 5.767000198364258, 5.699999809265137, 9.133000373840332, 9.024999618530273, 8.017000198364258, 6.099999904632568, 4.4629998207092285, 5.691999912261963, 7.474999904632568, 5.058000087738037, 4.531000137329102, 7.821000099182129, 9.958000183105469, 11.092000007629395, 10.088000297546387, 8.432999610900879, 12.600000381469727, 8.517000198364258, 7.992000102996826, 9.892000198364258, 12.071000099182129, 8.463000297546387, 3.132999897003174, 4.120999813079834, 6.316999912261963, 4.696000099182129, 7.017000198364258, 5.61299991607666, 7.2170000076293945, 6.879000186920166, 6.9720001220703125, 14.428999900817871, 9.892000198364258, 11.093999862670898, 14.449999809265137, 13.569000244140625, 15.312999725341797, 14.991999626159668, 11.088000297546387, 12.125, 11.758000373840332, 15.295999526977539, 16.871000289916992, 18.517000198364258, 21.591999053955078, 19.058000564575195, 18.950000762939453, 20.274999618530273, 17.5, 16.554000854492188, 13.067000389099121, 15.795999526977539, 18.51300048828125, 21.492000579833984, 24.100000381469727, 21.054000854492188, 19.253999710083008, 20.049999237060547, 19.475000381469727, 20.982999801635742, 21.479000091552734, 22.65399932861328, 23.107999801635742, 21.466999053955078, 20.554000854492188, 17.149999618530273, 15.723999977111816, 16.950000762939453, 17.395999908447266, 16.871000289916992, 18.08799934387207, 18.424999237060547, 15.821000099182129, 14.604000091552734, 13.045999526977539, 12.387999534606934, 16.492000579833984, 13.928999900817871, 14.883000373840332, 14.932999610900879, 14.338000297546387, 16.413999557495117, 18.145000457763672, 19.854000091552734, 19.788000106811523, 19.385000228881836, 17.191999435424805, 13.36299991607666, 11.991999626159668, 12.246000289916992, 15.887999534606934, 15.949999809265137, 18.549999237060547, 20.982999801635742, 14.696000099182129, 14.520999908447266, 14.892000198364258, 15.012999534606934, 13.782999992370605, 15.857999801635742, 18.312999725341797, 18.308000564575195, 17.66699981689453, 19.27899932861328, 20.13800048828125, 16.69099998474121, 17.19099998474121, 13.817000389099121, 14.371000289916992, 17.049999237060547, 17.312999725341797, 19.57900047302246, 18.367000579833984, 14.520999908447266, 18.163000106811523, 16.570999145507812, 17.816999435424805, 16.350000381469727, 18.91699981689453, 16.354000091552734, 13.979000091552734, 13.86299991607666, 13.637999534606934, 13.199999809265137, 10.454000473022461, 15.904000282287598, 13.142000198364258, 12.482999801635742, 15.562999725341797, 15.321000099182129, 13.920999526977539, 16.117000579833984, 14.541999816894531, 11.675000190734863, 10.866999626159668, 14.795999526977539, 12.717000007629395, 10.329000473022461, 12.095999717712402, 13.963000297546387, 14.824999809265137, 15.725000381469727, 16.350000381469727, 11.142000198364258, 10.079000473022461, 11.720999717712402, 8.253999710083008, 11.092000007629395, 13.258000373840332, 12.532999992370605, 13.949999809265137, 14.432999610900879, 15.541999816894531, 15.213000297546387, 12.220999717712402, 12.5, 10.079000473022461, 6.604000091552734, 9.875, 12.887999534606934, 14.430999755859375, 15.833000183105469, 13.446000099182129, 8.496000289916992, 12.192000389099121, 11.520999908447266, 9.357999801635742, 11.0, 10.116999626159668, 7.5920000076293945, 6.754000186920166, 6.138000011444092, 4.020999908447266, 3.308000087738037, 2.7790000438690186, 3.492000102996826, 3.6579999923706055, 5.199999809265137, 9.86299991607666, 11.199999809265137, 8.383000373840332, 7.854000091552734, 8.121000289916992, 11.145999908447266, 8.800000190734863, 9.907999992370605, 8.232999801635742, 7.525000095367432, 6.813000202178955, 5.7210001945495605, 7.558000087738037, 6.270999908447266, 7.313000202178955, 9.887999534606934, 8.991999626159668, 6.708000183105469, 1.1749999523162842, 3.7669999599456787, 3.8459999561309814, 3.825000047683716, 2.428999900817871, 1.5789999961853027, 1.6540000438690186, 1.4869999885559082, 2.1500000953674316, 6.958000183105469, 8.503999710083008, 2.0160000324249268, 2.242000102996826, 2.625, 5.038000106811523, 3.628999948501587, 6.982999801635742, 3.507999897003174, 1.024999976158142, 1.0130000114440918, -0.75, -0.550000011920929, 0.07900000363588333, -2.2330000400543213, -1.4129999876022339, 0.20800000429153442, 1.8289999961853027, 1.100000023841858, -2.9539999961853027, -5.882999897003174, -5.620999813079834, -4.474999904632568, -1.687999963760376, -2.3289999961853027, -2.75, -1.9129999876022339, -1.0709999799728394, -0.03799999877810478, 3.5290000438690186, 1.625, 3.950000047683716, 1.1790000200271606, -0.13300000131130219, 1.0290000438690186, -0.057999998331069946, -1.3289999961853027, -2.132999897003174, -1.649999976158142, 0.5630000233650208);
float[] l = float[](18.75, 18.75, 19.375, 16.25, 12.291000366210938, 10.0, 11.041000366210938, 18.33300018310547, 13.75, 6.875, 24.375, 10.208000183105469, 13.125, 19.15999984741211, 18.125, 12.708000183105469, 12.916000366210938, 12.5, 21.666000366210938, 23.950000762939453, 22.70800018310547, 15.40999984741211, 14.5, 16.041000366210938, 8.329999923706055, 11.666000366210938, 9.588000297546387, 1.875, 4.5833001136779785, 10.208000183105469, 17.08329963684082, 16.45800018310547, 12.291000366210938, 12.916000366210938, 23.75, 16.875, 10.416000366210938, 15.416000366210938, 20.83300018310547, 15.208000183105469, 10.833000183105469, 11.875, 7.915999889373779, 11.041000366210938, 21.45800018310547, 30.416000366210938, 21.25, 17.5, 8.958000183105469, 24.791000366210938, 21.875, 19.166000366210938, 7.915999889373779, 10.833000183105469, 5.409999847412109, 13.125, 9.583000183105469, 13.125, 5.833000183105469, 4.583000183105469, 10.0, 5.833000183105469, 2.5, 5.625, 1.875, 6.458000183105469, 8.75, 17.70800018310547, 21.73900032043457, 14.28600025177002, 20.0, 22.229000091552734, 9.666999816894531, 18.979000091552734, 15.354000091552734, 3.25, 10.666999816894531, 12.812999725341797, 9.854000091552734, 5.833000183105469, 8.043000221252441, 23.783000946044922, 11.880000114440918, 10.562999725341797, 19.125, 27.66699981689453, 13.187999725341797, 13.583000183105469, 8.041999816894531, 14.0, 20.520999908447266, 14.291999816894531, 21.41699981689453, 15.375, 18.95800018310547, 20.229000091552734, 18.58300018310547, 27.937999725341797, 22.770999908447266, 21.08300018310547, 17.437999725341797, 11.208000183105469, 9.416999816894531, 15.458000183105469, 17.104000091552734, 15.458000183105469, 17.104000091552734, 15.791999816894531, 15.333000183105469, 13.041999816894531, 12.625, 9.666999816894531, 17.770999908447266, 7.729000091552734, 10.770999908447266, 9.833000183105469, 7.354000091552734, 6.0, 10.333000183105469, 23.04199981689453, 22.895999908447266, 10.541999816894531, 6.333000183105469, 5.104000091552734, 12.458000183105469, 16.0, 12.833000183105469, 16.45800018310547, 11.312999725341797, 18.20800018310547, 11.833000183105469, 19.479000091552734, 7.979000091552734, 22.944000244140625, 4.285999774932861, 5.208000183105469, 5.0, 6.050000190734863, 15.229000091552734, 22.16699981689453, 25.04199981689453, 16.229000091552734, 16.354000091552734, 10.020999908447266, 6.729000091552734, 9.958000183105469, 13.208000183105469, 8.916999816894531, 9.312999725341797, 6.104000091552734, 10.229000091552734, 12.145999908447266, 12.145999908447266, 18.062999725341797, 11.75, 8.125, 3.437999963760376, 5.916999816894531, 5.041999816894531, 5.395999908447266, 9.062999725341797, 11.708000183105469, 5.813000202178955, 5.875, 3.2709999084472656, 3.0829999446868896, 4.833000183105469, 4.438000202178955, 5.208000183105469, 6.0, 12.041999816894531, 15.145999908447266, 7.438000202178955, 9.125, 9.5, 11.0, 12.416999816894531, 10.937999725341797, 9.854000091552734, 8.395999908447266, 5.291999816894531, 14.217000007629395, 7.416999816894531, 7.938000202178955, 8.041999816894531, 7.291999816894531, 7.938000202178955, 8.041999816894531, 7.291999816894531, 5.875, 6.5229997634887695, 4.354000091552734, 4.020999908447266, 4.438000202178955, 4.020999908447266, 4.438000202178955, 8.895999908447266, 13.395999908447266, 10.5, 8.354000091552734, 10.583000183105469, 5.063000202178955, 3.812999963760376, 4.438000202178955, 10.104000091552734, 13.958000183105469, 9.979000091552734, 12.458000183105469, 2.875, 3.2079999446868896, 3.4170000553131104, 8.229000091552734, 5.438000202178955, 8.708000183105469, 1.812999963760376, 0.22699999809265137, 12.72700023651123, 7.863999843597412, 5.208000183105469, 4.520999908447266, 5.041999816894531, 9.270999908447266, 12.166999816894531, 4.541999816894531, 8.375, 5.083000183105469, 6.604000091552734, 9.625, 7.541999816894531, 8.104000091552734, 5.833000183105469, 7.063000202178955, 8.467000007629395, 10.958000183105469, 5.979000091552734, 8.833000183105469, 6.25, 6.458000183105469, 10.958000183105469, 6.604000091552734, 5.791999816894531, 8.854000091552734, 7.313000202178955, 6.354000091552734, 11.25, 13.916999816894531, 18.0, 7.688000202178955, 9.333000183105469, 15.895999908447266, 13.562999725341797, 7.916999816894531, 7.188000202178955, 24.375, 25.54199981689453, 14.708000183105469, 7.979000091552734, 8.375, 9.916999816894531, 6.229000091552734, 7.520999908447266, 6.166999816894531, 8.583000183105469, 9.604000091552734, 6.25, 5.145999908447266, 8.770999908447266, 8.125, 7.645999908447266, 8.270999908447266, 13.416999816894531, 12.062999725341797, 10.145999908447266, 3.8540000915527344, 7.604000091552734, 9.770999908447266, 6.875, 5.958000183105469, 7.041999816894531, 10.104000091552734, 21.270999908447266, 11.458000183105469, 10.020999908447266, 2.625, 9.729000091552734, 18.125, 11.416999816894531, 5.958000183105469, 16.937999725341797, 15.375, 8.130999565124512, 6.687999725341797, 10.437999725341797, 16.33300018310547, 9.520999908447266, 7.229000091552734, 3.75, 8.062999725341797, 5.25, 14.0, 11.104000091552734, 10.25, 18.270999908447266, 16.75, 14.0, 12.333000183105469, 6.833000183105469, 4.563000202178955, 4.563000202178955, 8.020999908447266, 11.041999816894531, 7.875, 10.416999816894531, 15.032999992370605, 14.937999725341797, 18.54199981689453, 23.66699981689453, 15.973999977111816, 12.770999908447266, 17.687999725341797, 18.875, 11.75, 8.604000091552734, 14.104000091552734, 12.083000183105469, 15.437999725341797, 14.729000091552734, 9.770999908447266, 11.208000183105469, 7.854000091552734, 11.687999725341797, 21.16699981689453, 20.29199981689453, 20.20800018310547, 16.41699981689453, 9.020999908447266, 9.604000091552734, 8.854000091552734, 6.354000091552734, 13.833000183105469, 8.520999908447266, 3.7920000553131104, 9.645999908447266, 13.666999816894531, 8.604000091552734, 11.375, 10.166999816894531, 12.312999725341797, 14.583000183105469, 14.208000183105469);
float[] m = float[](8.699999809265137, 8.800000190734863, 9.5, 9.199999809265137, 8.0, 9.699999809265137, 10.0, 9.800000190734863, 8.899999618530273, 9.5, 9.300000190734863, 9.300000190734863, 9.399999618530273, 9.399999618530273, 8.300000190734863, 8.699999809265137, 9.699999809265137, 9.5, 8.600000381469727, 9.0, 8.399999618530273, 8.100000381469727, 9.399999618530273, 8.100000381469727, 9.600000381469727, 9.899999618530273, 9.899999618530273, 10.0, 10.0, 9.5, 9.0, 7.800000190734863, 8.100000381469727, 7.099999904632568, 6.5, 9.600000381469727, 8.800000190734863, 8.800000190734863, 9.100000381469727, 9.699999809265137, 9.399999618530273, 9.100000381469727, 9.300000190734863, 8.399999618530273, 6.800000190734863, 7.699999809265137, 8.899999618530273, 8.899999618530273, 8.0, 9.0, 8.309000015258789, 7.521999835968018, 9.5, 9.067999839782715, 9.28600025177002, 8.890000343322754, 8.604000091552734, 9.17199993133545, 9.581999778747559, 9.722999572753906, 9.626999855041504, 9.255000114440918, 8.454999923706055, 9.19950008392334, 9.045000076293945, 8.277000427246094, 8.982000350952148, 9.25, 8.845000267028809, 7.900000095367432, 7.550000190734863, 8.454999923706055, 6.949999809265137, 8.317999839782715, 6.054999828338623, 5.51800012588501, 5.855000019073486, 6.15500020980835, 5.664000034332275, 4.817999839782715, 5.341000080108643, 5.019000053405762, 5.828999996185303, 3.931999921798706, 7.535999774932861, 8.659000396728516, 6.123000144958496, 7.368000030517578, 6.255000114440918, 6.341000080108643, 5.658999919891357, 5.368000030517578, 7.214000225067139, 6.432000160217285, 5.2729997634887695, 5.835999965667725, 5.886000156402588, 8.559000015258789, 8.623000144958496, 8.131999969482422, 7.341000080108643, 6.304999828338623, 7.067999839782715, 6.564000129699707, 7.131999969482422, 4.613999843597412, 5.545000076293945, 6.2729997634887695, 5.105000019073486, 6.785999774932861, 6.25, 6.804999828338623, 6.935999870300293, 6.491000175476074, 5.190999984741211, 7.150000095367432, 7.486000061035156, 7.263999938964844, 8.486000061035156, 5.965000152587891, 6.214000225067139, 6.800000190734863, 5.23199987411499, 8.277000427246094, 7.309000015258789, 7.863999843597412, 6.304999828338623, 8.322999954223633, 8.46399974822998, 8.817999839782715, 6.505000114440918, 6.7820000648498535, 7.0, 2.440000057220459, 7.105000019073486, 8.522000312805176, 7.25, 5.572999954223633, 4.505000114440918, 4.550000190734863, 4.918000221252441, 5.255000114440918, 6.7230000495910645, 7.664000034332275, 6.7820000648498535, 7.164000034332275, 6.90500020980835, 7.2769999504089355, 8.659000396728516, 8.741000175476074, 8.663999557495117, 9.432000160217285, 6.26800012588501, 7.714000225067139, 9.640999794006348, 8.005000114440918, 7.835999965667725, 6.668000221252441, 6.945000171661377, 8.17300033569336, 7.695000171661377, 6.300000190734863, 5.986000061035156, 6.214000225067139, 6.182000160217285, 7.126999855041504, 7.986000061035156, 8.741000175476074, 8.258999824523926, 8.118000030517578, 7.359000205993652, 7.800000190734863, 8.567999839782715, 7.714000225067139, 7.136000156402588, 7.540999889373779, 8.13599967956543, 7.554100036621094, 8.13599967956543, 9.586000442504883, 7.464000225067139, 7.626999855041504, 7.040999889373779, 7.2179999351501465, 6.949999809265137, 6.574999809265137, 6.304999828338623, 6.491000175476074, 7.099999904632568, 7.349999904632568, 8.317999839782715, 8.468000411987305, 8.055000305175781, 8.92300033569336, 8.32699966430664, 7.0229997634887695, 7.804999828338623, 7.418000221252441, 8.322999954223633, 8.336000442504883, 9.031999588012695, 7.572999954223633, 7.559000015258789, 7.922999858856201, 8.572999954223633, 7.835999965667725, 7.422999858856201, 7.650000095367432, 7.658999919891357, 9.27299976348877, 5.611000061035156, 7.535999774932861, 7.914000034332275, 7.73199987411499, 7.714000225067139, 7.050000190734863, 6.408999919891357, 6.954999923706055, 6.550000190734863, 7.631999969482422, 7.59499979019165, 8.345000267028809, 8.340999603271484, 8.505000114440918, 9.177000045776367, 8.53600025177002, 9.142999649047852, 7.4730000495910645, 9.42300033569336, 8.940999984741211, 8.82699966430664, 9.444999694824219, 8.52299976348877, 8.109000205993652, 8.454999923706055, 9.336000442504883, 9.741000175476074, 8.32800006866455, 8.458999633789062, 8.46399974822998, 8.059000015258789, 7.25, 8.88599967956543, 9.126999855041504, 8.458999633789062, 8.373000144958496, 6.785999774932861, 7.5, 8.185999870300293, 8.909000396728516, 7.644999980926514, 8.309000015258789, 8.182000160217285, 7.7270002365112305, 7.932000160217285, 7.427000045776367, 9.314000129699707, 8.732000350952148, 8.687999725341797, 8.47700023651123, 8.21399974822998, 70855.0, 8.267999649047852, 8.61400032043457, 8.07699966430664, 9.567999839782715, 9.322999954223633, 8.97700023651123, 9.241000175476074, 9.63599967956543, 8.781999588012695, 9.005000114440918, 9.095000267028809, 9.78600025177002, 8.564000129699707, 8.067999839782715, 8.704999923706055, 8.359000205993652, 8.744999885559082, 9.604999542236328, 9.545000076293945, 8.876999855041504, 9.07699966430664, 9.218000411987305, 8.840999603271484, 9.390999794006348, 9.63599967956543, 9.800000190734863, 9.208999633789062, 9.095000267028809, 7.9679999351501465, 9.913999557495117, 9.840999603271484, 9.932000160217285, 8.232000350952148, 9.440999984741211, 9.140999794006348, 9.409000396728516, 9.232000350952148, 8.868000030517578, 8.36400032043457, 8.513999938964844, 9.11400032043457, 9.295000076293945, 9.032999992370605, 9.883000373840332, 9.854999542236328, 9.031999588012695, 8.093999862670898, 9.055000305175781, 9.845000267028809, 8.809000015258789, 9.095000267028809, 9.618000030517578, 9.444999694824219, 9.32699966430664, 9.222999572753906, 9.631999969482422, 9.52299976348877, 9.005000114440918, 9.258999824523926, 8.654999732971191, 9.373000144958496, 8.36400032043457, 5.932000160217285, 7.013999938964844, 6.868000030517578, 7.144999980926514, 9.494999885559082, 8.77299976348877, 8.47700023651123, 9.482000350952148, 9.732000350952148, 9.472999572753906, 9.685999870300293, 9.767999649047852, 9.682000160217285, 9.704999923706055, 9.36299991607666, 9.984999656677246, 9.708999633789062, 9.649999618530273, 9.435999870300293, 9.295000076293945, 8.586000442504883, 9.230999946594238, 9.194999694824219, 9.824000358581543);
float[] S = float[](999.6699829101562, 996.5040283203125, 991.8699951171875, 982.1500244140625, 1000.1160278320312, 1004.6539916992188, 1005.10400390625, 999.0579833984375, 996.9124755859375, 995.25, 994.89501953125, 999.2789916992188, 995.1950073242188, 999.2789916992188, 995.19580078125, 1000.2000122070312, 1009.6909790039062, 1003.35400390625, 1008.5869750976562, 1014.3200073242188, 1000.6539916992188, 993.25, 1001.8250122070312, 990.2160034179688, 990.4500122070312, 995.3200073242188, 994.7949829101562, 988.9949951171875, 981.6409912109375, 980.3079833984375, 970.6500244140625, 976.43701171875, 985.0250244140625, 997.7869873046875, 993.8660278320312, 1006.9829711914062, 1003.8790283203125, 997.72900390625, 968.10400390625, 966.7830200195312, 973.8829956054688, 984.5750122070312, 998.4910278320312, 1006.0830078125, 994.9829711914062, 984.32080078125, 988.3289794921875, 990.0250244140625, 997.291015625, 997.0159912109375, 989.9409790039062, 975.52001953125, 982.1079711914062, 982.9949951171875, 973.6909790039062, 975.8579711914062, 981.9450073242188, 988.3909912109375, 981.166015625, 984.8040161132812, 988.3209838867188, 991.00830078125, 989.7119750976562, 992.0499877929688, 993.7039794921875, 998.56201171875, 999.1699829101562, 992.6409912109375, 976.916015625, 975.260009765625, 998.0, 1004.7659912109375, 1000.5449829101562, 998.8790283203125, 1003.5449829101562, 1009.3499755859375, 1020.5659790039062, 1024.5999755859375, 1021.6749877929688, 1018.9119873046875, 1019.0499877929688, 1015.6790161132812, 1003.6389770507812, 999.5560302734375, 1002.6370239257812, 1005.2000122070312, 989.8079833984375, 982.416015625, 978.68701171875, 998.6329956054688, 1013.2659912109375, 1016.3250122070312, 1010.2620239257812, 1000.9119873046875, 982.8579711914062, 986.9832763671875, 986.64501953125, 981.0289916992188, 990.2332763671875, 996.2750244140625, 1000.625, 1007.6119995117188, 1010.7830200195312, 1009.1079711914062, 1000.1199951171875, 988.1832885742188, 184.6833038330078, 988.6199951171875, 992.8250122070312, 987.2833251953125, 988.3870239257812, 996.666015625, 995.7579956054688, 989.9000244140625, 992.1539916992188, 997.94580078125, 996.5079956054688, 991.7791137695312, 993.8125, 998.4949951171875, 996.041015625, 995.7750244140625, 985.2869873046875, 987.7160034179688, 991.9949951171875, 994.6539916992188, 994.81201171875, 991.4910278320312, 992.06201171875, 993.3159790039062, 996.1409912109375, 997.8829956054688, 1004.1279907226562, 1001.1749877929688, 1004.2999877929688, 1007.02001953125, 1006.2750244140625, 1003.7329711914062, 1005.1539916992188, 1000.3079833984375, 994.4119873046875, 987.18701171875, 985.239990234375, 986.7999877929688, 995.6539916992188, 994.8499755859375, 994.8499755859375, 998.4660034179688, 998.8829956054688, 998.5579833984375, 1001.0040283203125, 1004.719970703125, 1004.0750122070312, 999.094970703125, 998.9949951171875, 998.9010009765625, 997.9829711914062, 998.7329711914062, 1000.7999877929688, 1000.2579956054688, 1002.7659912109375, 1008.7080078125, 1011.5369873046875, 1008.7830200195312, 1000.5079956054688, 994.0579833984375, 992.8369750976562, 985.0230712890625, 987.7999877929688, 990.9039916992188, 995.3660278320312, 997.0540161132812, 992.2949829101562, 988.8250122070312, 992.2080078125, 993.8410034179688, 997.0869750976562, 996.1510009765625, 995.5499877929688, 1002.5159912109375, 1001.4409790039062, 1000.375, 998.3829956054688, 996.8709716796875, 1000.2949829101562, 1004.5869750976562, 1003.844970703125, 998.9080200195312, 994.8040161132812, 993.8330078125, 994.2579956054688, 994.2329711914062, 993.9000244140625, 1001.0449829101562, 1001.4520263671875, 997.3410034179688, 993.469970703125, 994.5869750976562, 992.8870239257812, 997.6950073242188, 998.5540161132812, 995.5579833984375, 994.43701171875, 1000.1370239257812, 1009.4329833984375, 1011.7449951171875, 1009.4329833984375, 1005.9810180664062, 1006.2000122070312, 1006.8040161132812, 1003.6409912109375, 1001.5289916992188, 1001.0079956054688, 999.9080200195312, 998.5120239257812, 997.2579956054688, 994.7000122070312, 994.7000122070312, 997.5999755859375, 1001.4119873046875, 1001.041015625, 994.0374755859375, 993.219970703125, 990.2949829101562, 986.8560180664062, 992.2833251953125, 994.375, 993.4248046875, 992.77001953125, 1001.1500244140625, 1002.3250122070312, 998.7000122070312, 996.8579711914062, 1001.0789794921875, 995.8250122070312, 989.5040283203125, 1000.9290161132812, 1001.7999877929688, 999.1409912109375, 1003.31201171875, 1007.1329956054688, 999.9450073242188, 993.0579833984375, 1001.844970703125, 1003.8499755859375, 1006.969970703125, 1001.8699951171875, 997.4199829101562, 995.4910278320312, 993.7999877929688, 993.344970703125, 992.93701171875, 997.4409790039062, 1000.5289916992188, 1003.68701171875, 1002.2999877929688, 1000.7520141601562, 1002.8079833984375, 1003.0120239257812, 997.5659790039062, 999.3410034179688, 993.9450073242188, 996.3579711914062, 1000.1749877929688, 999.7750244140625, 1003.0120239257812, 1000.3330078125, 999.4832763671875, 999.4749755859375, 998.5579833984375, 996.6290283203125, 1001.625, 1002.416015625, 986.8079833984375, 991.0800170898438, 991.1079711914062, 1001.6829833984375, 997.8790283203125, 988.56201171875, 988.344970703125, 991.7570190429688, 997.0499877929688, 998.125, 995.9199829101562, 997.02001953125, 997.02001953125, 1006.3829956054688, 1007.4119873046875, 1000.4409790039062, 1000.0750122070312, 1000.0750122070312, 1006.4749755859375, 1002.7869873046875, 1002.3790283203125, 1006.8369750976562, 1004.7160034179688, 1012.5910034179688, 1016.1500244140625, 1016.4520263671875, 1013.7119750976562, 1010.5250244140625, 1006.875, 1006.8790283203125, 1005.6060180664062, 1007.0750122070312, 1002.1160278320312, 991.2039794921875, 997.7000122070312, 1007.5499877929688, 992.041015625, 989.77001953125, 995.916015625, 998.5289916992188, 996.625, 993.77001953125, 1003.8369750976562, 1007.39501953125, 1002.4539794921875, 1008.9829711914062, 1014.3870239257812, 1006.25, 1001.5789794921875, 1003.9500122070312, 1009.6749877929688, 1012.0040283203125, 1011.969970703125, 1011.8499755859375, 1007.14501953125, 1001.469970703125, 1001.0900268554688, 1001.9619750976562, 1002.7000122070312, 1004.625, 1000.5499877929688, 1006.0910034179688, 1004.1409912109375, 1006.0910034179688, 1004.1409912109375, 1006.0330200195312, 1009.8040161132812, 1009.2949829101562, 1002.7000122070312, 992.3079833984375, 989.3499755859375, 984.5369873046875, 991.64501953125, 998.2249755859375, 994.2999877929688, 986.625, 989.6619873046875, 992.2410278320312);

void main() {

  float timeSec = (timeMsec/1000.0)*0.5;
  float fracttime = fract(timeSec);
  int time = int(timeSec);

  vec3 color = vec3(0.0);
  float a = 1.0;
  
  float kinterp = mix(k[time%348], k[(time+1)%348], fracttime);
  float linterp = mix(l[time%348], l[(time+1)%348], fracttime);
  float minterp = map(mix(m[time%348], m[(time+1)%348], fracttime),2.44,10.0,0.0,20.0);
  float Sinterp = map(mix(S[time%348], S[(time+1)%348], fracttime),966.783,1024.6,0.0,5.0);
  
  float lines = abs(chladni(p, kinterp , linterp ,minterp,Sinterp,2.0));
  
  if (lines > 0.3)
  {
  discard; 
  }
  
  color = vec3(dot(p, p));

  gl_FragColor = vec4( color*pow(1.0-lines,1.5) , 1.0 );

}

`
});

